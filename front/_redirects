# Vanity URLs for main sections
/profile     /profile/index.html   200

# IMPORTANT: More specific rules must come before general rules
# Vanity URL for individual soul profiles - route to dynamic template
/souls/:username    /souls/profile.html?user=:username   200

# Exact match for /souls (directory listing)
/souls       /souls/index.html           200

# Fallback for any other unmatched souls routes
/souls/*     /souls/index.html           200

# Redirect for old profile URL structure
# (This will redirect /pages/souls/profile.html?username=foo to /souls/?username=foo)
# The rule above for /souls/:username should then ideally pick it up if :username can be part of query string.
# Or, the application logic in profile.html needs to handle username from query param.
/pages/souls/profile.html   /souls/  301 